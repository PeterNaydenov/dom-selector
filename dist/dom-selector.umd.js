!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).domSelector=n()}(this,(function(){"use strict";return function(){const e=new Map,n=new Map;function t(n){let{name:t,selector:o,where:i,direction:r}=n;return!!(t&&o&&o instanceof Function)&&(i||(i=({item:e})=>e),r||(r="none"),e.set(t,{name:t,selector:o,where:i,direction:r}),!0)}function*o(e,n=!1){if(yield e,n)return;const t=e.parentElement;"BODY"===t.tagName&&(n=!0),yield*o(t,n)}function*i(e){yield e;const n=e.children;if(0!==n.length)for(let e of n)yield*i(e)}function r(e){return e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):e instanceof Array?e:null==e?[]:[e]}return{define:t,remember:function(e,t){t?.length?n.set(e,t):n.set(e,[t])},run:function(f,...u){if("string"!=typeof f){if(!t(f))return[]}let l=e.get(f);if(null==l)return[];let{name:c,selector:s,direction:d,where:a}=l,m=function(e,n,t,...f){const u="none"!==n,l=t instanceof Function,c=[],s=Symbol("end___");let d=r(e);if(0===d.length)return c;if(u&&(d=d.reduce(((e,t)=>(t instanceof HTMLElement&&("up"===n?e.push(...o(t)):"down"===n&&e.push(...i(t))),e)),[])),l){let e=0;for(let n of d){let u=t({item:n,i:e,END:s,length:c.length,down:i,up:o},...f);if(e++,u===s)break;u&&c.push(...r(u))}}return c}(s(...u),d,a,...u);return n.set(f,m),m},use:function(e){const t=n.get(e);return null==t?[]:t}}}}));
