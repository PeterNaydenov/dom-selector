!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).domSelector=n()}(this,(function(){"use strict";return function(){const e=new Map,n=new Map;function t(n){let{name:t,selector:o,where:i,direction:r}=n;return!!(t&&o&&o instanceof Function)&&(i||(i=({item:e})=>e),r||(r="down"),e.set(t,{name:t,selector:o,where:i,direction:r}),!0)}function*o(e,n=!1){if(yield e,n)return;const t=e.parentElement;"BODY"===t.tagName&&(n=!0),yield*o(t,n)}function*i(e){yield e;const n=e.children;if(0!==n.length)for(let e of n)yield*i(e)}return{define:t,remember:function(e,t){t?.length?n.set(e,t):n.set(e,[t])},run:function(r,...l){if("string"!=typeof r){if(!t(r))return[]}let f=e.get(r);if(null==f)return[];let{name:u,selector:c,direction:s,where:d}=f,m=function(e,n,t,...r){const l=!e?.length,f=[],u=Symbol("end___");let c;c=l?"up"===n?o(e):i(e):e;let s=0;for(let e of c){let n=t({item:e,i:s,END:u,length:f.length,down:i,up:o},...r);if(s++,n===u)break;n&&f.push(n)}return f}(c(),s,d,...l);return n.set(r,m),m},use:function(e){const t=n.get(e);return null==t?[]:t}}}}));
