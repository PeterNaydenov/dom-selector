!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).domSelector=t()}(this,(function(){"use strict";return function(){const e=new Map,t=new Map;function n(t){let{name:n,selector:o,where:i,stop:r,direction:l}=t;return!!(n&&o&&o instanceof Function)&&(i||(i=({item:e})=>e),l||(l="down"),e.set(n,{selector:o,where:i,stop:r,direction:l}),!0)}function*o(e,t=!1){if(yield e,t)return;const n=e.parentElement;"BODY"===n.tagName&&(t=!0),yield*o(n,t)}function*i(e){yield e;const t=e.children;if(0!==t.length)for(let e of t)yield*i(e)}return{define:n,remember:function(e,n){n?.length?t.set(e,n):t.set(e,[n])},run:function(r,...l){if("string"!=typeof r){if(!n(r))return[]}let f=e.get(r);if(null==f)return[];let{name:u,selector:c,direction:s,where:d}=f,p=function(e,t,n,...r){const l=!e?.length,f=[],u=Symbol("end___");let c;c=l?"up"===t?o(e):i(e):e;let s=0;for(let e of c){let t=n({item:e,i:s,END:u,length:f.length,down:i,up:o},...r);if(s++,t===u)break;t&&f.push(t)}return f}(c(),s,d,...l);return t.set(u,p),p},use:function(e){const n=t.get(e);return null==n?[]:n}}}}));
