"use strict";module.exports=function(){const e=new Map,t=new Map;function n(t){let{name:n,selector:r,where:i,direction:o}=t;return!!(n&&r&&r instanceof Function)&&(i||(i=({item:e})=>e),o||(o="down"),e.set(n,{name:n,selector:r,where:i,direction:o}),!0)}function*r(e,t=!1){if(yield e,t)return;const n=e.parentElement;"BODY"===n.tagName&&(t=!0),yield*r(n,t)}function*i(e){yield e;const t=e.children;if(0!==t.length)for(let e of t)yield*i(e)}return{define:n,remember:function(e,n){n?.length?t.set(e,n):t.set(e,[n])},run:function(o,...l){if("string"!=typeof o){if(!n(o))return[]}let u=e.get(o);if(null==u)return[];let{name:c,selector:f,direction:s,where:d}=u,m=function(e,t,n,...o){const l=!e?.length,u=[],c=Symbol("end___");let f;f=l?"up"===t?r(e):i(e):e;let s=0;for(let e of f){let t=n({item:e,i:s,END:c,length:u.length,down:i,up:r},...o);if(s++,t===c)break;t&&u.push(t)}return u}(f(...l),s,d,...l);return t.set(o,m),m},use:function(e){const n=t.get(e);return null==n?[]:n}}};
