"use strict";module.exports=function(){const e=new Map,t=new Map;function n(t){let{name:n,selector:r,where:o,direction:i}=t;return!!(n&&r&&r instanceof Function)&&(o||(o=({item:e})=>e),i||(i="down"),e.set(n,{name:n,selector:r,where:o,direction:i}),!0)}function*r(e,t=!1){if(yield e,t)return;const n=e.parentElement;"BODY"===n.tagName&&(t=!0),yield*r(n,t)}function*o(e){yield e;const t=e.children;if(0!==t.length)for(let e of t)yield*o(e)}return{define:n,remember:function(e,n){n?.length?t.set(e,n):t.set(e,[n])},run:function(i,...l){if("string"!=typeof i){if(!n(i))return[]}let u=e.get(i);if(null==u)return[];let{name:c,selector:f,direction:s,where:d}=u;console.log(c);let m=function(e,t,n,...i){const l=!e?.length,u=[],c=Symbol("end___");let f;f=l?"up"===t?r(e):o(e):e;let s=0;for(let e of f){let t=n({item:e,i:s,END:c,length:u.length,down:o,up:r},...i);if(s++,t===c)break;t&&u.push(t)}return u}(f(),s,d,...l);return t.set(i,m),m},use:function(e){const n=t.get(e);return null==n?[]:n}}};
